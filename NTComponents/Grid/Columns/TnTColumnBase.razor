@using Microsoft.AspNetCore.Components.Rendering
@using NTComponents.Core
@using NTComponents.Interfaces
@inherits TnTComponentBase
@typeparam TGridItem
@implements ITnTComponentBase
@implements IDisposable

@code {
	public virtual void RenderHeaderContent(RenderTreeBuilder __builder) {
		if (HeaderToolip is not null) {
			<TnTTooltip>
				@HeaderToolip
			</TnTTooltip>
		}

		if (HeaderCellItemTemplate is not null) {
			@HeaderCellItemTemplate(this)
		}
		else {
			<div class="@_headerClass" @onclick="@(Sortable? SortAsync : null!)">
				<span class="tnt-column-header-title">
					@Title
				</span>

				@if (Sortable) {
					var sortedOn = IsSortedOn;
					@if (sortedOn.HasValue) {
						<span class="tnt-column-header-sort-icon">
							@if (sortedOn == SortDirection.Ascending) {
								<MaterialIcon Icon="@MaterialIcon.ArrowDropUp" />
							}
							else if (sortedOn == SortDirection.Descending) {
								<MaterialIcon Icon="@MaterialIcon.ArrowDropDown" />
							}
							@if (Context.Grid.AllowMultiSort) {
								<span class="tnt-column-header-sort-index">
									@_sortIndex
								</span>
							}
						</span>
					}
					@if (EnableRipple) {
						<TnTRippleEffect />
					}
				}
			</div>
		}
	}
}